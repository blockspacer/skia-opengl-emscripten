'use strict';var m;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function n(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var q="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},r="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function t(a,b){if(b){var c=r;a=a.split(".");for(var e=0;e<a.length-1;e++){var f=a[e];f in c||(c[f]={});c=c[f]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&q(c,a,{configurable:!0,writable:!0,value:b})}}t("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991});t("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991});function ba(){ba=function(){};r.Symbol||(r.Symbol=ca)}function fa(a,b){this.a=a;q(this,"description",{configurable:!0,writable:!0,value:b})}fa.prototype.toString=function(){return this.a};
var ca=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new fa("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();function ha(){ba();var a=r.Symbol.iterator;a||(a=r.Symbol.iterator=r.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&q(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ia(aa(this))}});ha=function(){}}function ia(a){ha();a={next:a};a[r.Symbol.iterator]=function(){return this};return a}
function u(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
t("WeakMap",function(a){function b(d){this.a=(g+=Math.random()+1).toString();if(d){d=n(d);for(var k;!(k=d.next()).done;)k=k.value,this.set(k[0],k[1])}}function c(){}function e(d){if(!u(d,h)){var k=new c;q(d,h,{value:k})}}function f(d){var k=Object[d];k&&(Object[d]=function(l){if(l instanceof c)return l;e(l);return k(l)})}if(function(){if(!a||!Object.seal)return!1;try{var d=Object.seal({}),k=Object.seal({}),l=new a([[d,2],[k,3]]);if(2!=l.get(d)||3!=l.get(k))return!1;l.delete(d);l.set(k,4);return!l.has(d)&&
4==l.get(k)}catch(p){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var g=0;b.prototype.set=function(d,k){e(d);if(!u(d,h))throw Error("WeakMap key fail: "+d);d[h][this.a]=k;return this};b.prototype.get=function(d){return u(d,h)?d[h][this.a]:void 0};b.prototype.has=function(d){return u(d,h)&&u(d[h],this.a)};b.prototype.delete=function(d){return u(d,h)&&u(d[h],this.a)?delete d[h][this.a]:!1};return b});
t("Map",function(a){function b(){var d={};return d.B=d.next=d.head=d}function c(d,k){var l=d.a;return ia(function(){if(l){for(;l.head!=d.a;)l=l.B;for(;l.next!=l.head;)return l=l.next,{done:!1,value:k(l)};l=null}return{done:!0,value:void 0}})}function e(d,k){var l=k&&typeof k;"object"==l||"function"==l?h.has(k)?l=h.get(k):(l=""+ ++g,h.set(k,l)):l="p_"+k;var p=d.b[l];if(p&&u(d.b,l))for(d=0;d<p.length;d++){var z=p[d];if(k!==k&&z.key!==z.key||k===z.key)return{id:l,list:p,index:d,l:z}}return{id:l,list:p,
index:-1,l:void 0}}function f(d){this.b={};this.a=b();this.size=0;if(d){d=n(d);for(var k;!(k=d.next()).done;)k=k.value,this.set(k[0],k[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),k=new a(n([[d,"s"]]));if("s"!=k.get(d)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var l=k.entries(),p=l.next();if(p.done||p.value[0]!=d||"s"!=p.value[1])return!1;p=l.next();return p.done||4!=p.value[0].x||
"t"!=p.value[1]||!l.next().done?!1:!0}catch(z){return!1}}())return a;ha();var h=new WeakMap;f.prototype.set=function(d,k){d=0===d?0:d;var l=e(this,d);l.list||(l.list=this.b[l.id]=[]);l.l?l.l.value=k:(l.l={next:this.a,B:this.a.B,head:this.a,key:d,value:k},l.list.push(l.l),this.a.B.next=l.l,this.a.B=l.l,this.size++);return this};f.prototype.delete=function(d){d=e(this,d);return d.l&&d.list?(d.list.splice(d.index,1),d.list.length||delete this.b[d.id],d.l.B.next=d.l.next,d.l.next.B=d.l.B,d.l.head=null,
this.size--,!0):!1};f.prototype.clear=function(){this.b={};this.a=this.a.B=b();this.size=0};f.prototype.has=function(d){return!!e(this,d).l};f.prototype.get=function(d){return(d=e(this,d).l)&&d.value};f.prototype.entries=function(){return c(this,function(d){return[d.key,d.value]})};f.prototype.keys=function(){return c(this,function(d){return d.key})};f.prototype.values=function(){return c(this,function(d){return d.value})};f.prototype.forEach=function(d,k){for(var l=this.entries(),p;!(p=l.next()).done;)p=
p.value,d.call(k,p[1],p[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var g=0;return f});t("Array.from",function(a){return a?a:function(b,c,e){c=null!=c?c:function(d){return d};var f=[],h="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof h){b=h.call(b);for(var g=0;!(h=b.next()).done;)f.push(c.call(e,h.value,g++))}else for(h=b.length,g=0;g<h;g++)f.push(c.call(e,b[g],g));return f}});
t("Promise",function(a){function b(g){this.b=0;this.v=void 0;this.a=[];var d=this.g();try{g(d.resolve,d.reject)}catch(k){d.reject(k)}}function c(){this.a=null}function e(g){return g instanceof b?g:new b(function(d){d(g)})}if(a)return a;c.prototype.b=function(g){if(null==this.a){this.a=[];var d=this;this.g(function(){d.v()})}this.a.push(g)};var f=r.setTimeout;c.prototype.g=function(g){f(g,0)};c.prototype.v=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var d=0;d<g.length;++d){var k=
g[d];g[d]=null;try{k()}catch(l){this.j(l)}}}this.a=null};c.prototype.j=function(g){this.g(function(){throw g;})};b.prototype.g=function(){function g(l){return function(p){k||(k=!0,l.call(d,p))}}var d=this,k=!1;return{resolve:g(this.da),reject:g(this.j)}};b.prototype.da=function(g){if(g===this)this.j(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.ga(g);else{a:switch(typeof g){case "object":var d=null!=g;break a;case "function":d=!0;break a;default:d=!1}d?this.ca(g):
this.L(g)}};b.prototype.ca=function(g){var d=void 0;try{d=g.then}catch(k){this.j(k);return}"function"==typeof d?this.ia(d,g):this.L(g)};b.prototype.j=function(g){this.U(2,g)};b.prototype.L=function(g){this.U(1,g)};b.prototype.U=function(g,d){if(0!=this.b)throw Error("Cannot settle("+g+", "+d+"): Promise already settled in state"+this.b);this.b=g;this.v=d;this.ba()};b.prototype.ba=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)h.b(this.a[g]);this.a=null}};var h=new c;b.prototype.ga=function(g){var d=
this.g();g.J(d.resolve,d.reject)};b.prototype.ia=function(g,d){var k=this.g();try{g.call(d,k.resolve,k.reject)}catch(l){k.reject(l)}};b.prototype.then=function(g,d){function k(A,G){return"function"==typeof A?function(da){try{l(A(da))}catch(ea){p(ea)}}:G}var l,p,z=new b(function(A,G){l=A;p=G});this.J(k(g,l),k(d,p));return z};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.J=function(g,d){function k(){switch(l.b){case 1:g(l.v);break;case 2:d(l.v);break;default:throw Error("Unexpected state: "+
l.b);}}var l=this;null==this.a?h.b(k):this.a.push(k)};b.resolve=e;b.reject=function(g){return new b(function(d,k){k(g)})};b.race=function(g){return new b(function(d,k){for(var l=n(g),p=l.next();!p.done;p=l.next())e(p.value).J(d,k)})};b.all=function(g){var d=n(g),k=d.next();return k.done?e([]):new b(function(l,p){function z(da){return function(ea){A[da]=ea;G--;0==G&&l(A)}}var A=[],G=0;do A.push(void 0),G++,e(k.value).J(z(A.length-1),p),k=d.next();while(!k.done)})};return b});var ja=this;
v("mojo.internal.exportModule",function(a){var b=ja;a=a.split(".");for(var c=void 0;a.length&&(c=a.shift());)b[c]||(b[c]={}),b=b[c]});var w=!!(new Uint8Array((new Uint16Array([1])).buffer))[0];function x(a){return null===a||void 0===a}function y(a){return a+(8-a%8)%8}function ka(a,b,c){w?(a.setUint32(b,Number(BigInt(c)&BigInt(4294967295)),w),a.setUint32(b+4,Number(BigInt(c)>>BigInt(32)),w)):(a.setUint32(b,Number(BigInt(c)>>BigInt(32)),w),a.setUint32(b+4,Number(BigInt(c)&BigInt(4294967295)),w))}
function la(a,b){var c=8+a.N;a=n(a.o);for(var e=a.next();!e.done;e=a.next()){e=e.value;var f=b[e.name];e.type.$.s&&!x(f)&&(c+=y(e.type.$.s(f,e.I)))}return c}function ma(a,b){return a.h===B?8+(b.length+7)>>3:8+b.length*a.h.$.f(!!a.u)}function C(a,b){var c=ma(a,b);if(!a.h.$.s)return c;b=n(b);for(var e=b.next();!e.done;e=b.next())e=e.value,x(e)||(c+=y(a.h.$.s(e,!!a.u)));return c}
function na(a,b){if(w){var c=a.getUint32(b,w);a=a.getUint32(b+4,w)}else c=a.getUint32(b+4,w),a=a.getUint32(b,w);c=BigInt(a)<<BigInt(32)|BigInt(c);return c<=BigInt(Number.MAX_SAFE_INTEGER)?Number(c):c}
function oa(a,b,c,e,f){if(0==(a&3)){var h=24;var g=0}else h=32,g=1;var d=h+la(e,f);this.buffer=new ArrayBuffer(d);this.handles=[];d=new DataView(this.buffer);d.setUint32(0,h,w);d.setUint32(4,g,w);d.setUint32(8,0);d.setUint32(12,b,w);d.setUint32(16,a,w);d.setUint32(20,0);0<g&&ka(d,24,c);this.a=h;a=D(this,8+e.N);pa(new E(this,a),e,f)}function D(a,b){b=y(b);var c=new DataView(a.buffer,a.a,b);a.a+=b;return c}function E(a,b){this.w=a;this.m=b}
function qa(a,b,c,e){var f=a.m.getUint8(b);e?a.m.setUint8(b,f|1<<c):a.m.setUint8(b,f&~(1<<c))}function F(a,b,c){a.m.setUint32(b,c,w)}function ra(a,b,c){F(a,b,a.w.handles.length);a.w.handles.push(c)}function H(a,b,c){ka(a.m,b,c-a.m.byteOffset-b)}
function I(a,b,c,e){var f=ma(b,e),h=D(a.w,f),g=new E(a.w,h);H(a,c,h.byteOffset);F(g,0,f);F(g,4,e.length);a=8;if(b.h===B)for(b=0,c=n(e),e=c.next();!e.done;e=c.next())qa(g,a,b,e.value),b++,8==b&&(b=0,a++);else for(c=n(e),e=c.next();!e.done;e=c.next()){e=e.value;if(null===e){if(!b.u)throw Error("Trying to send a null element in an array of non-nullable elements");b.h.$.A(g,a)}b.h.$.encode(e,g,a,0,!!b.u);a+=b.h.$.f(!!b.u)}}
function sa(a,b,c,e){if(e instanceof Map){var f=Array.from(e.keys());var h=Array.from(e.values())}else f=Object.keys(e),h=f.map(function(k){return e[k]});var g=D(a.w,24),d=new E(a.w,g);H(a,c,g.byteOffset);F(d,0,24);F(d,4,0);I(d,{h:b.S},8,f);I(d,{h:b.valueType,u:b.Y},16,h)}
function pa(a,b,c){F(a,0,8+b.N);F(a,4,0);for(var e=n(b.o),f=e.next();!f.done;f=e.next()){f=f.value;var h=8+f.W;if(c&&c instanceof Object&&!x(c[f.name]))f.type.$.encode(c[f.name],a,h,f.V,f.I);else{if(!f.I)throw Error(b.name+' missing value for non-nullable field "'+f.name+'"');f.type.$.A(a,h)}}}function ta(a){ua||(ua=new TextEncoder("utf-8"));return ua.encode(a)}var ua=null;function J(a,b){this.i=a;this.C=b}function va(a,b,c){return!!(a.i.getUint8(b)&1<<c)}
function K(a,b){return a.i.getUint32(b,w)}function wa(a,b){b=a.i.getUint32(b,w);if(4294967295==b)return null;if(b>=a.C.length)throw Error("Decoded invalid handle index");return a.C[b]}function L(a,b){var c=na(a.i,b);return 0==c?0:a.i.byteOffset+b+c}
function M(a,b,c){c=L(a,c);if(!c)return null;a=new J(new DataView(a.i.buffer,c),a.C);K(a,0);c=K(a,4);if(!c)return[];var e=[];if(b.h===B)for(b=0;b<c;++b)e.push(va(a,8+(b>>3),b%8));else for(var f=8,h=0;h<c;++h){var g=b.h.$.decode(a,f,0,!!b.u);if(null===g&&!b.u)throw Error("Received unexpected array element");e.push(g);f+=b.h.$.f(!!b.u)}return e}
function N(a,b){K(a,0);K(a,4);for(var c={},e=n(b.o),f=e.next();!f.done;f=e.next()){f=f.value;var h=f.type.$.decode(a,8+f.W,f.V,!!f.I);if(null===h&&!f.I)throw Error("Received "+b.name+' with invalid null field "'+f.name+'"');c[f.name]=h}return c}var xa=null;function O(a,b,c,e,f,h){b=new oa(e,b,c,f.$.G,h);a.writeMessage(b.buffer,b.handles)}
function ya(a){var b=a.getUint32(0,w),c=a.getUint32(4,w);if(0==c&&24!=b||1==c&&32!=b||2<c)throw Error("Received invalid message header");if(2==c)throw Error("v2 messages not yet supported");b={R:b,D:a.getUint32(12,w),flags:a.getUint32(16,w)};b.F=0<c?a.getUint32(24,w):0;return b}var B={$:{encode:function(a,b,c,e){qa(b,c,e,a)},decode:function(a,b,c){return va(a,b,c)},c:!0}};v("mojo.internal.Bool",B);
v("mojo.internal.Int8",{$:{encode:function(a,b,c){b.m.setInt8(c,a)},decode:function(a,b){return a.i.getInt8(b)},f:function(){return 1},c:!0}});var P={$:{encode:function(a,b,c){b.m.setUint8(c,a)},decode:function(a,b){return a.i.getUint8(b)},f:function(){return 1},c:!0}};v("mojo.internal.Uint8",P);v("mojo.internal.Int16",{$:{encode:function(a,b,c){b.m.setInt16(c,a,w)},decode:function(a,b){return a.i.getInt16(b,w)},f:function(){return 2},c:!0}});
v("mojo.internal.Uint16",{$:{encode:function(a,b,c){b.m.setUint16(c,a,w)},decode:function(a,b){return a.i.getUint16(b,w)},f:function(){return 2},c:!0}});v("mojo.internal.Int32",{$:{encode:function(a,b,c){b.m.setInt32(c,a,w)},decode:function(a,b){return a.i.getInt32(b,w)},f:function(){return 4},c:!0}});var Q={$:{encode:function(a,b,c){F(b,c,a)},decode:function(a,b){return K(a,b)},f:function(){return 4},c:!0}};v("mojo.internal.Uint32",Q);
v("mojo.internal.Int64",{$:{encode:function(a,b,c){b=b.m;w?(b.setUint32(c,Number(BigInt(a)&BigInt(4294967295)),w),b.setInt32(c+4,Number(BigInt(a)>>BigInt(32)),w)):(b.setInt32(c,Number(BigInt(a)>>BigInt(32)),w),b.setUint32(c+4,Number(BigInt(a)&BigInt(4294967295)),w))},decode:function(a,b){var c=a.i;w?(a=c.getUint32(b,w),b=c.getInt32(b+4,w)):(a=c.getUint32(b+4,w),b=c.getInt32(b,w));b=BigInt(b)<<BigInt(32)|BigInt(a);return b<=BigInt(Number.MAX_SAFE_INTEGER)&&b>=BigInt(Number.MIN_SAFE_INTEGER)?Number(b):
b},f:function(){return 8},c:!0}});v("mojo.internal.Uint64",{$:{encode:function(a,b,c){ka(b.m,c,a)},decode:function(a,b){return na(a.i,b)},f:function(){return 8},c:!0}});v("mojo.internal.Float",{$:{encode:function(a,b,c){b.m.setFloat32(c,a,w)},decode:function(a,b){return a.i.getFloat32(b,w)},f:function(){return 4},c:!0}});v("mojo.internal.Double",{$:{encode:function(a,b,c){b.m.setFloat64(c,a,w)},decode:function(a,b){return a.i.getFloat64(b,w)},f:function(){return 8},c:!0}});
var za={$:{encode:function(a,b,c){ra(b,c,a)},A:function(){},decode:function(a,b){return wa(a,b)},f:function(){return 4},c:!1}};v("mojo.internal.Handle",za);var Aa={$:{encode:function(a,b,c){if("string"!==typeof a)throw Error("Unxpected non-string value for string field.");I(b,{h:P},c,ta(a))},A:function(){},decode:function(a,b){xa||(xa=new TextDecoder("utf-8"));return xa.decode((new Uint8Array(M(a,{h:P},b))).buffer)},s:function(a){return C({h:P},ta(a))},f:function(){return 8},c:!0}};
v("mojo.internal.String",Aa);function Ba(a,b){var c={h:a,u:b};return{$:{pa:c,encode:function(e,f,h){I(f,c,h,e)},A:function(){},decode:function(e,f){return M(e,c,f)},s:function(e){return C(c,e)},f:function(){return 8},c:!1}}}v("mojo.internal.Array",Ba);
v("mojo.internal.Map",function(a,b,c){var e={S:a,valueType:b,Y:c};return{$:{qa:e,encode:function(f,h,g){sa(h,e,g,f)},A:function(){},decode:function(f,h){if(h=L(f,h)){h=new J(new DataView(f.i.buffer,h),f.C);f=K(h,0);var g=K(h,4);if(24!=f||0!=g)throw Error("Received invalid map data");f=M(h,{h:e.S},8);h=M(h,{h:e.valueType,u:e.Y},16);if(f.length!=h.length)throw Error("Received invalid map data");if(e.S.$.c){g={};for(var d=0;d<f.length;++d)g[f[d]]=h[d];f=g}else{g=new Map;for(d=0;d<f.length;++d)g.set(f[d],
h[d]);f=g}}else f=null;return f},s:function(f){var h=f instanceof Map?Array.from(f.keys()):Object.keys(f),g=f instanceof Map?Array.from(f.values()):h.map(function(d){return f[d]});return 24+C({h:a},h)+C({h:b,u:c},g)},f:function(){return 8},c:!1}}});function Ca(){return{$:{encode:function(a,b,c){F(b,c,a)},decode:function(a,b){return a.i.getInt32(b,w)},f:function(){return 4},c:!0}}}v("mojo.internal.Enum",Ca);function R(a,b,c,e,f,h){return{name:a,W:b,V:c,type:e,defaultValue:f,I:h}}
v("mojo.internal.StructField",R);function S(a,b,c,e){var f={name:b,N:c,o:e};a.$={G:f,encode:function(h,g,d){var k=D(g.w,8+f.N),l=new E(g.w,k);H(g,d,k.byteOffset);pa(l,f,h)},A:function(){},decode:function(h,g){return(g=L(h,g))?N(new J(new DataView(h.i.buffer,g),h.C),f):null},s:function(h){return la(f,h)},f:function(){return 8},c:!1}}v("mojo.internal.Struct",S);
function T(a,b,c){var e={name:b,o:c};a.$={ja:e,encode:function(f,h,g,d,k){d=h;k&&(d=D(h.w,16),H(h,g,d.byteOffset),g=0,d=new E(h.w,d));h=Object.keys(f);if(1!==h.length)throw Error("Value for "+e.name+" must be an Object with a single property named one of: "+Object.keys(e.o).join(","));h=h[0];k=e.o[h];F(d,g,16);F(d,g+4,k.ordinal);k.type.$.encode(f[h],d,g+8,0,k.nullable)},A:function(){},decode:function(f,h,g,d){a:{g=f;if(d){d=L(f,h);if(!d){var k=null;break a}g=new J(new DataView(f.i.buffer,d),f.C);
h=0}d=K(g,h+4);for(k in e.o)if(f=e.o[k],f.ordinal===d){d=f.type.$.decode(g,h+8,0,f.nullable);if(null===d&&!f.nullable)throw Error("Received "+e.name+" with invalid null "+("field: "+f.name));f={};f[k]=d;k=f;break a}k=void 0}return k},s:function(f,h){h=h?16:0;var g=Object.keys(f);if(1!==g.length)throw Error("Value for "+e.name+" must be an Object with a single property named one of: "+Object.keys(e.o).join(","));var d=g[0];g=e.o[d];f=f[d];x(f)||(g.type.$.ja?h+=y(g.type.$.s(f,!0)):g.type.$.s&&(h+=y(g.type.$.s(f,
g.nullable))));return h},f:function(f){return f?8:16},c:!1}}v("mojo.internal.Union",T);v("mojo.internal.InterfaceProxy",function(a){return{$:{encode:function(b,c,e){if(!(b instanceof a))throw Error("Invalid proxy type. Expected "+a.name);if(!b.proxy.handle)throw Error("Unexpected null "+a.name);ra(c,e,b.proxy.handle);F(c,e+4,0);b.proxy.X()},A:function(b,c){F(b,c,4294967295)},decode:function(b,c){var e=wa(b,c);K(b,c+4);return e?new a(e):null},f:function(){return 8},c:!1}}});
v("mojo.internal.InterfaceRequest",function(a){return{$:{encode:function(b,c,e){if(!(b instanceof a))throw Error("Invalid request type. Expected "+a.name);if(!b.handle)throw Error("Unexpected null "+a.name);ra(c,e,b.handle)},A:function(b,c){F(b,c,4294967295)},decode:function(b,c){return(b=wa(b,c))?new a(b):null},f:function(){return 8},c:!1}}});
v("mojo.internal.AssociatedInterfaceProxy",function(a){return{$:{type:a,encode:function(){throw Error("Associated interfaces not supported yet.");},decode:function(){throw Error("Associated interfaces not supported yet.");},c:!1}}});v("mojo.internal.AssociatedInterfaceRequest",function(a){return{$:{type:a,encode:function(){throw Error("Associated interfaces not supported yet.");},decode:function(){throw Error("Associated interfaces not supported yet.");},c:!1}}});v("mojo.interfaceControl.kRunMessageId",4294967295);v("mojo.interfaceControl.kRunOrClosePipeMessageId",4294967294);var U={$:{}};v("mojo.interfaceControl.RunMessageParamsSpec",U);var Da={$:{}};v("mojo.interfaceControl.RunResponseMessageParamsSpec",Da);var Ea={$:{}};v("mojo.interfaceControl.QueryVersionSpec",Ea);var Fa={$:{}};v("mojo.interfaceControl.QueryVersionResultSpec",Fa);var Ga={$:{}};v("mojo.interfaceControl.FlushForTestingSpec",Ga);var Ha={$:{}};
v("mojo.interfaceControl.RunOrClosePipeMessageParamsSpec",Ha);var Ia={$:{}};v("mojo.interfaceControl.RequireVersionSpec",Ia);var Ja={$:{}};v("mojo.interfaceControl.RunInputSpec",Ja);var Ka={$:{}};v("mojo.interfaceControl.RunOutputSpec",Ka);var La={$:{}};v("mojo.interfaceControl.RunOrClosePipeInputSpec",La);S(U.$,"RunMessageParams",16,[R("input",0,0,Ja.$,null,!1)]);S(Da.$,"RunResponseMessageParams",16,[R("output",0,0,Ka.$,null,!0)]);S(Ea.$,"QueryVersion",0,[]);
S(Fa.$,"QueryVersionResult",8,[R("version",0,0,Q,0,!1)]);S(Ga.$,"FlushForTesting",0,[]);S(Ha.$,"RunOrClosePipeMessageParams",16,[R("input",0,0,La.$,null,!1)]);S(Ia.$,"RequireVersion",8,[R("version",0,0,Q,0,!1)]);T(Ja.$,"RunInput",{queryVersion:{ordinal:0,type:Ea.$},flushForTesting:{ordinal:1,type:Ga.$}});T(Ka.$,"RunOutput",{queryVersionResult:{ordinal:0,type:Fa.$}});T(La.$,"RunOrClosePipeInput",{requireVersion:{ordinal:0,type:Ia.$}});var Ma={$:Ca()};v("mojo.native.SerializedHandleTypeSpec",Ma);var Na=0,Oa=0,Pa=0,Qa=0,Ra=0;v("mojo.native.SerializedHandleType",{ma:Na,na:Oa,oa:Pa,la:Qa,ka:Ra,MIN_VALUE:0,MAX_VALUE:4});Na=0;Oa=Na+1;Pa=Oa+1;Qa=Pa+1;Ra=Qa+1;var Sa={$:{}};v("mojo.native.SerializedHandleSpec",Sa);var Ta={$:{}};v("mojo.native.NativeStructSpec",Ta);S(Sa.$,"SerializedHandle",8,[R("theHandle",0,0,za,null,!1),R("type",4,0,Ma.$,0,!1)]);
S(Ta.$,"NativeStruct",16,[R("data",0,0,Ba(P,!1),null,!1),R("handles",8,0,Ba(Sa.$,!1),null,!0)]);v("mojo.pipeControl.kRunOrClosePipeMessageId",4294967294);var Ua={$:{}};v("mojo.pipeControl.RunOrClosePipeMessageParamsSpec",Ua);var Va={$:{}};v("mojo.pipeControl.DisconnectReasonSpec",Va);var Wa={$:{}};v("mojo.pipeControl.PeerAssociatedEndpointClosedEventSpec",Wa);var Xa={$:{}};v("mojo.pipeControl.RunOrClosePipeInputSpec",Xa);S(Ua.$,"RunOrClosePipeMessageParams",16,[R("input",0,0,Xa.$,null,!1)]);S(Va.$,"DisconnectReason",16,[R("customReason",0,0,Q,0,!1),R("description",8,0,Aa,null,!1)]);
S(Wa.$,"PeerAssociatedEndpointClosedEvent",16,[R("id",0,0,Q,0,!1),R("disconnectReason",8,0,Va.$,null,!0)]);T(Xa.$,"RunOrClosePipeInput",{peerAssociatedEndpointClosedEvent:{ordinal:0,type:Wa.$}});function v(a,b){a=a.split(".");for(var c=ja,e=void 0;a.length&&(e=a.shift());)a.length||void 0===b?c[e]&&c[e]!=Object.prototype[e]?c=c[e]:c=c[e]={}:c[e]=b};function Ya(a){this.a=a;this.b=new Map}function Za(a,b){var c={flushForTesting:{}};return new Promise(function(e){O(a.a,4294967295,b,1,U.$,{input:c});a.b.set(b,e)})}function $a(a,b,c){return 4294967295===b.D?(c=new DataView(c,b.R),c=new J(c,[]),b.flags&1?(b=b.F,N(c,U.$.$.G).input.hasOwnProperty("flushForTesting")?(O(a.a,4294967295,b,2,Da.$,{output:null}),a=!0):a=!1):(a=a.b.get(b.F))?(a(),a=!0):a=!1,a):!1}function ab(a,b,c,e,f){this.F=a;this.D=b;this.a=c;this.resolve=e;this.reject=f}
function V(){this.a=new Map;this.b=0}V.prototype.addListener=function(a){var b=++this.b;this.a.set(b,a);return b};V.prototype.removeListener=function(a){return this.a.delete(a)};function bb(a){a=n(a.a.values());for(var b=a.next();!b.done;b=a.next())b=b.value,b()}v("mojo.internal.interfaceSupport.ConnectionErrorEventRouter",V);V.prototype.removeListener=V.prototype.removeListener;V.prototype.addListener=V.prototype.addListener;
function W(a,b){this.handle=null;this.L=a;this.b=null;this.j=0;this.a=new Map;this.g=null;this.v=new V;b instanceof MojoHandle&&this.H(b)}m=W.prototype;m.O=function(){var a=Mojo.createMessagePipe(),b=a.handle1;this.H(a.handle0);return new this.L(b)};m.H=function(a){if(this.handle)throw Error("Proxy already bound.");this.handle=a;var b=new cb(a);b.j=this.ea.bind(this);b.g=this.M.bind(this);b.start();this.g=new Ya(a);this.b=b;this.j=0;this.a=new Map};
m.X=function(){if(this.b){var a=this.b;a.a&&(a.a.cancel(),a.a=null)}};m.close=function(){db(this,"Message pipe closed.")};m.P=function(){return this.v};
m.sendMessage=function(a,b,c,e){var f=this;if(!this.handle)throw Error("Attempting to use an unbound proxy. Try $.createRequest() first.");if(c&&(!this.b||null===this.b.a))return Promise.reject(Error("The pipe has already been closed."));var h=this.j++,g={};b.$.G.o.forEach(function(d,k){return g[d.name]=e[k]});O(this.handle,a,h,c?1:0,b,g);return c?new Promise(function(d,k){f.a.set(h,new ab(h,a,c,d,k))}):Promise.resolve()};m.K=function(){return Za(this.g,this.j++)};
m.ea=function(a,b){var c=new DataView(a);c=ya(c);if(!$a(this.g,c,a)){if(!(c.flags&2)||c.flags&1)return this.M("Received unexpected request message");var e=this.a.get(c.F);this.a.delete(c.F);if(!e)return this.M("Received unexpected response message");a=N(new J(new DataView(a,c.R),b),e.a.$.G);if(!a||c.D!==e.D)return this.M("Received malformed response message");e.resolve(a)}};m.M=function(a){db(this,a);bb(this.v)};
function db(a,b){eb(a.b);a.b=null;for(var c=n(a.a.keys()),e=c.next();!e.done;e=c.next())a.a.get(e.value).reject(Error(b));a.a=new Map}v("mojo.internal.interfaceSupport.InterfaceProxyBase",W);W.prototype.flushForTesting=W.prototype.K;W.prototype.sendMessage=W.prototype.sendMessage;W.prototype.getConnectionErrorEventRouter=W.prototype.P;W.prototype.close=W.prototype.close;W.prototype.unbind=W.prototype.X;W.prototype.bindHandle=W.prototype.H;function X(a){this.a=a}X.prototype.O=function(){return this.a.O()};
X.prototype.close=function(){this.a.close()};X.prototype.K=function(){return this.a.K()};v("mojo.internal.interfaceSupport.InterfaceProxyBaseWrapper",X);X.prototype.flushForTesting=X.prototype.K;X.prototype.close=X.prototype.close;X.prototype.createRequest=X.prototype.O;function fb(){this.a=new Map;this.b=0}fb.prototype.removeListener=function(a){this.a.get(a)();return this.a.delete(a)};v("mojo.internal.interfaceSupport.CallbackRouter",fb);fb.prototype.removeListener=fb.prototype.removeListener;
function Y(a){this.a=new Map;this.b=a}Y.prototype.addListener=function(a){var b=this,c=++this.b.b;this.a.set(c,a);this.b.a.set(c,function(){return b.a.delete(c)});return c};Y.prototype.aa=function(a){return a?this.g.bind(this):this.j.bind(this)};Y.prototype.j=function(a){var b=Array.from(arguments);this.a.forEach(function(c){return c.apply(null,b)})};
Y.prototype.g=function(a){var b=Array.from(arguments),c=Array.from(this.a.values()).map(function(h){return h.apply(null,b)});c=n(c);for(var e=c.next();!e.done;e=c.next())if(e=e.value,void 0!==e){if(void 0!==f)throw Error("Multiple listeners attempted to reply to a message");var f=e}return f};v("mojo.internal.interfaceSupport.InterfaceCallbackTarget",Y);Y.prototype.createTargetHandler=Y.prototype.aa;Y.prototype.addListener=Y.prototype.addListener;function gb(a,b,c){this.b=a;this.a=b;this.g=c}
function Z(){this.a=new Map;this.b=new Map;this.j=null;this.g=new V}m=Z.prototype;m.ha=function(a,b,c,e){this.b.set(a,new gb(b,c,e))};m.H=function(a){var b=new cb(a);this.a.set(a,b);b.j=this.fa.bind(this,a);b.g=this.T.bind(this,a);b.start();this.j=new Ya(a)};m.Z=function(){for(var a=n(this.a.values()),b=a.next();!b.done;b=a.next())eb(b.value);this.a.clear()};m.P=function(){return this.g};
m.fa=function(a,b,c){var e=this,f=new DataView(b),h=ya(f);if(!$a(this.j,h,b)){if(h.flags&2)throw Error("Received unexpected response on interface target");var g=this.b.get(h.D);if(!g)throw Error("Received unknown message");var d=N(new J(new DataView(b,h.R),c),g.b.$.G);if(!d)throw Error("Received malformed message");b=g.g.apply(null,g.b.$.G.o.map(function(k){return d[k.name]}));if(g.a){if(void 0===b)throw this.T(a),Error("Message expects a reply but its handler did not provide one.");b instanceof Promise||
(b=Promise.resolve(b));b.then(function(k){O(a,h.D,h.F,2,g.a,k)}).catch(function(){e.T(a)})}}};m.T=function(a){var b=this.a.get(a);b&&(bb(this.g),eb(b),this.a.delete(a))};v("mojo.internal.interfaceSupport.InterfaceTarget",Z);Z.prototype.getConnectionErrorEventRouter=Z.prototype.P;Z.prototype.closeBindings=Z.prototype.Z;Z.prototype.bindHandle=Z.prototype.H;Z.prototype.registerHandler=Z.prototype.ha;function cb(a){this.b=a;this.j=null;this.g=function(){};this.a=null}
cb.prototype.start=function(){this.a=this.b.watch({readable:!0},this.v.bind(this))};function eb(a){a.a&&(a.a&&(a.a.cancel(),a.a=null),a.b.close())}cb.prototype.v=function(){for(;this.a;){var a=this.b.readMessage();if(a.result==Mojo.RESULT_SHOULD_WAIT)break;if(a.result==Mojo.RESULT_FAILED_PRECONDITION){this.g();break}if(a.result!=Mojo.RESULT_OK)throw Error("Unexpected error on HandleReader: "+a.result);this.j(a.buffer,a.handles)}};
